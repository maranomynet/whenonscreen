// jQuery.fn.whenOnScreen 1.0  - MIT/GPL Licensed - More info: https://github.com/maranomynet/whenonscreen/
(function(e){var t=e(window),r,l=e.whenOnScreen={nsEvents:false,recalcOnResize:true,live:false,leftright:false,range:{visible:{radius:50}},throttle:50},i=function(e,t){var r=/^(-?\d+(?:\.\d+)?)%(s|e)$/.exec(e);var l=r&&parseFloat(r[1])/100;var i=r&&(r[2]==="s"?"scr":"elm")+(/^[TB]/.test(t)?"Height":"Width");return r?function(e){return l*e[i]}:parseInt(e,10)||0},n=function(e,t,r,l,i){var n="_"+i;return!r&&e[n]!=null?e[n]:e[n]=t(l,i)},f=[],o=[],s,a,h=function(r){var i=t.scrollTop(),f=t.height(),h=i+f,c,u,g,m=!r.type,v=m||l.recalcOnResize&&r.type==="resize",p=m?r:o;for(var d=0,w;w=p[d];d++){var L=w.elm,b=v||w.live,O=b&&L.offset(),R=b?w.elmTop=O.top:w.elmTop,T=b?w.elmHeight=L.outerHeight():w.elmHeight,y=b?w.elmBottom=R+T:w.elmBottom,B,S,E;if(w.leftright){if(!d){c=t.scrollLeft();u=t.width();g=c+u}B=b?w.elmLeft=O.left:w.elmLeft;S=b?w.elmWidth=L.outerWidth():w.elmWidth;E=b?w.elmRight=B+S:w.elmRight}var H={scrTop:i,scrHeight:f,scrBottom:h,scrLeft:c,scrWidth:u,scrRight:g,$elm:L,elmTop:R,elmHeight:T,elmBottom:y,elmLeft:B,elmWidth:S,elmRight:E,lastScrTop:s,lastScrLeft:a,leftright:w.leftright};e.each(w.ranges,function(e,t){var r,f=t.top,o=t.bottom;f.call&&(f=n(t,f,b,H,"top"));o.call&&(o=n(t,o,b,H,"bottom"));var s=R-f>=h;var a=i>=y+o;if(s&&a){s=a=false}L.isElmBelow=s;L.isElmAbove=a;r=!s&&!a;if(w.leftright){var u=t.left,m=t.right;u.call&&(u=n(t,u,b,H,"left"));m.call&&(m=n(t,m,b,H,"right"));var v=B-u>=g;var p=c>=E+m;if(v&&p){v=p=false}L.isElmRight=v;L.isElmLeft=p;r=r&&!v&&!p}if(r!==t.onscreen){t.onscreen=r;H.type=(r?"whenon":"whenoff")+"screen"+(l.nsEvents?"."+e:"");H.range=t;L.trigger(H)}});s=i;a=c}};e.fn.whenOnScreen=function(n,s){var a="run",c;if(typeof n==="string"){a=n;n=s}n=e.extend({},n);if(a==="run"){c=n.ranges!=null?n.ranges:l.ranges;if(e.isArray(c)){var u=c;c={};e.each(u,function(e,t){c["r"+e]=t})}c=e.isPlainObject(c)?c:{visible:{radius:c}};e.each(c,function(e,t){var r=t.radius||0;delete t.radius;if(t.top==null){t.top=r}if(t.bottom==null){t.bottom=r}if(t.left==null){t.left=r}if(t.right==null){t.right=r}})}var g=this;this.each(function(){var t=this,r=e.inArray(t,f),s=r>-1;if(a==="stop"){if(s){f.splice(r,1);o.splice(r,1)}}else if(a==="data"){g=o[r];return false}else{var u=s?o[r]:{};if(a==="run"){if(!s){f.push(t);o.push(u);u.elm=e(t)}u.leftright=n.leftright!=null?!!n.leftright:!!l.leftright;u.live=n.live!=null?!!n.live:!!l.live;u.ranges={};e.each(c,function(t,r){u.ranges[t]=e.extend({},r)})}e.each(u.ranges,function(t,r){e.each(["Top","Bottom","Left","Right"],function(e,t){var l=t.toLowerCase(),n=r[l];r[l]=n.charAt?i(n,t):n;delete r["_"+l]})});h([u])}});if(!f.length){t.off(".whenOnScreen");r=false}else if(!r){r=true;t.on("scroll.whenOnScreen resize.whenOnScreen",e.throttleFn&&l.throttle?e.throttleFn(h,true,l.throttle):h)}return g}})(jQuery);
