// jQuery.fn.whenOnScreen 1.0  - MIT/GPL Licensed - More info: https://github.com/maranomynet/whenonscreen/
!function(e){var t=e(window),r,l=50,n=50,i=e.whenOnScreen={range:l,throttle:n},o=[],f=[],h=function(e){var r=t.scrollTop(),l=r+t.height(),n,i;e=e.push?e:f;for(var o=0,h;h=e[o];o++){var s=h.elm,a=h.live?s.offset():null,u=a?a.top:h.elmTop,g=a?u+s.outerHeight():h.elmBottom,c,m;if(h.leftright){n=i?n:t.scrollLeft();i=i||n+t.width();c=a?a.left:h.elmLeft;m=a?c+s.outerWidth():h.elmRight}for(var p=0,v;v=h.ranges[p];p++){var d=u-v.top<l&&r<g+v.bottom;if(d!==v.onscreen){v.onscreen=d;s.trigger({type:d?"whenonscreen":"whenoffscreen",range:v,scrTop:r,scrBottom:l,scrLeft:n,scrRight:i,elmTop:u,elmBottom:g,elmLeft:c,elmRight:m,leftright:h.leftright,live:h.live})}}}};e.fn.whenOnScreen=function(n){var s="run",a;if(typeof n==="string"){s=n;n=arguments[1]}n=e.extend({},n);if(s==="run"){a=n.ranges!=null?n.ranges:i.ranges!=null?i.ranges:l;a=typeof a==="number"?[{radius:a}]:a;for(var u=0,g;g=a[u];u++){var c=g.radius||0;g.top=g.top!=null?g.top:c;g.bottom=g.bottom!=null?g.bottom:c;g.left=g.left!=null?g.left:c;g.right=g.right!=null?g.right:c}}var m=this;this.each(function(){var t=this,r=e.inArray(t,o),l=r>-1;if(s==="stop"){if(l){o.splice(r,1);f.splice(r,1)}}else{var u={};if(l){u=f[r]}if(s==="data"){m=l?u:undefined;return false}if(s!=="recalc"){if(!l){o.push(t);f.push(u);u.elm=e(t)}u.leftright=!!n.leftright||!!i.leftright;u.live=!!n.live;u.ranges=[];e.each(a,function(){u.ranges.push(e.extend({},this))})}if(!n.live&&(!l||s==="recalc")){var g=u.elm,c=g.offset();u.elmTop=c.top;u.elmBottom=c.top+g.outerHeight();if(u.leftright){u.elmLeft=c.left;u.elmRight=c.left+g.outerWidth()}}if(s==="run"||!u.live){h([u])}}});if(!o.length){t.off(".whenOnScreen");r=false}else if(!r){t.on("scroll.whenOnScreen resize.whenOnScreen",i.throttle?e.throttleFn(h,true,i.throttle):h);r=true}return m}}(jQuery);
